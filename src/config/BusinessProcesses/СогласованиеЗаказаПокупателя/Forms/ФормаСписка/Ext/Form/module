
////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ПОЛЕЙ ФОРМЫ
//

// Процедура - обработчик действия элемента "ЗавершитьБизнесПроцесс" панели "ДействияФормы".
//
Процедура ДействияФормыЗавершитьБизнесПроцесс(Кнопка)

	ТекущиеДанные = ЭлементыФормы.БизнесПроцессСписок.ТекущиеДанные;
	Если Не ТекущиеДанные = Неопределено Тогда

		ТекущиеДанные.Ссылка.ПолучитьФорму("ФормаЗавершенияБизнесПроцесса").Открыть();

	КонецЕсли;

КонецПроцедуры // ДействияФормыЗакршитьБизнесПроцесс()

// Процедура обработчик действия элемента "КартаМаршрута" панели "ДействияФормы".
//
Процедура ДействияФормыКартаМаршрута(Кнопка)

	ТекущиеДанные = ЭлементыФормы.БизнесПроцессСписок.ТекущиеДанные;
	Если Не ТекущиеДанные = Неопределено Тогда

		РаботаСБизнесПроцессами.ОткрытьКартумаршрута(ТекущиеДанные.Ссылка);

	КонецЕсли;

КонецПроцедуры // ДействияФормыКартаМаршрута()

// Процедура - обработчик действия элемента "Анализ" панели "ДействияФормы".
//
Процедура ДействияФормыАнализ(Кнопка)

	ТекущиеДанные = ЭлементыФормы.БизнесПроцессСписок.ТекущиеДанные;
	Если Не ТекущиеДанные = Неопределено Тогда

		РаботаСБизнесПроцессами.ОткрытьАнализСогласованияЗаказа(ТекущиеДанные.Ссылка);

	КонецЕсли;

КонецПроцедуры // ДействияФормыАнализ()

// Процедура - обработчик события "ПриПолученииДанных" табличного поля "БизнесПроцессСписок".
//
Процедура БизнесПроцессСписокПриПолученииДанных(Элемент, ОформленияСтрок)

	РаботаСБизнесПроцессами.ОтобразитьЗавершенныеБизнесПроцессы(ОформленияСтрок);

	КартинкаНаСогласовании = БиблиотекаКартинок.СостояниеНаСогласовании;
	КартинкаНеСогласовано  = БиблиотекаКартинок.СостояниеНеСогласовано;
	КартинкаСогласовано    = БиблиотекаКартинок.СостояниеСогласовано;
	Для Каждого ОформленияСтроки Из ОформленияСтрок Цикл

		ДанныеСтроки = ОформленияСтроки.ДанныеСтроки;

		ОформленияСтроки.Ячейки.Состояние.ОтображатьКартинку = Истина;

		Если ДанныеСтроки.СостояниеСогласования = Перечисления.СостояниеОбъектаСогласования.Согласован Тогда

			ОформленияСтроки.Ячейки.Состояние.Картинка = КартинкаСогласовано;

		ИначеЕсли ДанныеСтроки.СостояниеСогласования = Перечисления.СостояниеОбъектаСогласования.НеСогласован Тогда

			ОформленияСтроки.Ячейки.Состояние.Картинка = КартинкаНеСогласовано;

		ИначеЕсли ДанныеСтроки.СостояниеСогласования = Перечисления.СостояниеОбъектаСогласования.НаСогласовании Тогда

			ОформленияСтроки.Ячейки.Состояние.Картинка = КартинкаНаСогласовании;

		КонецЕсли;

	КонецЦикла;

КонецПроцедуры // БизнесПроцессСписокПриПолученииДанных()

// Процедура - обработчик действия элемента "ОтборАктивных".
//
Процедура ДействияФормыОтборАктивных(Кнопка)

	РаботаСБизнесПроцессами.УстановитьОтборАктивныхБизнесПроцессов(БизнесПроцессСписок, Не Кнопка.Пометка);
	Кнопка.Пометка = Не Кнопка.Пометка;

КонецПроцедуры // ДействияФормыОтборАктивных()


