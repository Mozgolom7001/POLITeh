
// Процедура открывает карту маршрута бизнес-процесса.
//
Процедура ОткрытьКартуМаршрута()

	РаботаСБизнесПроцессами.ОткрытьКартумаршрута(Ссылка);

КонецПроцедуры // ОткрытьКартуМаршрута()

// Процедура устанавливает доступность элементов формы в зависимости от признака "Стартован".
//
Процедура УстановитьДоступностьЭлементовФормы()

	ЭлементыФормы.ОбъектСогласования.ТолькоПросмотр = Стартован;
	ЭлементыФормы.Настройка.ТолькоПросмотр          = Стартован;
	ЭлементыФормы.ОсновныеДействияФормы.Кнопки.КнопкаОК.Доступность = Не Стартован;

КонецПроцедуры // УстановитьДоступностьЭлементовФормы()

// Процедура вызывается при изменении настройки.
//
Процедура ПриИзмененииНастройки()

	Если Настройка.Пустая() Тогда
		Возврат;
	КонецЕсли;

	Если Настройка.ВидБизнесПроцесса <> Перечисления.ВидыБизнесПроцессов.СогласованиеЗаказаПокупателя Тогда
		Настройка = Справочники.НастройкиБизнесПроцессов.ПустаяСсылка();
	КонецЕсли;

КонецПроцедуры // ПриИзмененииНастройки()

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ДЕЙСТВИЯ КОМАНДНЫХ ПАНЕЛЕЙ ФОРМЫ
//

// Процедура - обработчик действия элемента "Анализ" панели "ДействияФормы".
//
Процедура ДействияФормыАнализ(Кнопка)

	РаботаСБизнесПроцессами.ОткрытьАнализСогласованияЗаказа(Ссылка);

КонецПроцедуры // ДействияФормыАнализ()

// Процедура - обработчик действия элемента "ОткрытьКартуМаршрута" панели "ДействияФормы".
//
Процедура ДействияФормыОткрытьКартуМаршрута(Кнопка)

	ОткрытьКартуМаршрута();

КонецПроцедуры // ДействияФормыоткрытьКартуМаршрута()

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ПОЛЕЙ ФОРМЫ
//

// Процедура - обработчик события "ПриИзменении" поля "настройка".
//
Процедура НастройкаПриИзменении(Элемент)

	ПриИзмененииНастройки();

КонецПроцедуры // НастройкаПриИзменении()

// Процедура - обработчик события "НачалоВыбора" элемента формы "Настройка".
//
Процедура НастройкаНачалоВыбора(Элемент, СтандартнаяОбработка)

	СтандартнаяОбработка = Ложь;
	ФормаВыбора = Справочники.НастройкиБизнесПроцессов.ПолучитьФормуВыбора(,Элемент,Элемент);
	ФормаВыбора.СправочникСписок.Отбор.ВидБизнесПроцесса.Установить(Перечисления.ВидыБизнесПроцессов.СогласованиеЗаказаПокупателя);
	ФормаВыбора.ПараметрТекущаяСтрока = Настройка;
	ФормаВыбора.Открыть();

КонецПроцедуры // НастройкаНачалоВыбора()

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ
//

// Процедура - обработчик события "ПриОткрытии".
//
Процедура ПриОткрытии()

	Если ЭтоНовый() Тогда
		Инициатор = ОбщегоНазначения.ПолучитьЗначениеПеременной("глТекущийПользователь");
	Иначе
		УстановитьДоступностьЭлементовФормы();
	КонецЕсли;

	РаботаСБизнесПроцессами.УстановитьЗаголовокБизнесПроцесса(ЭтотОбъект, ЭтаФорма);

КонецПроцедуры //ПриОткрытии()

// Процедура - обработчик события "ПослеЗаписи".
//
Процедура ПослеЗаписи()

	УстановитьДоступностьЭлементовФормы();

	РаботаСБизнесПроцессами.УстановитьЗаголовокБизнесПроцесса(ЭтотОбъект, ЭтаФорма);

КонецПроцедуры // ПослеЗаписи()


