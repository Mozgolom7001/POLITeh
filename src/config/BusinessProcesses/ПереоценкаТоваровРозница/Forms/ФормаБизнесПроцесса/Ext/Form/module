////////////////////////////////////////////////////////////////////////////////
// СЕРВИСНЫЕ ПРОЦЕДУРЫ
//

// Процедура вызывается при изменении настройки.
//
Процедура ПриИзмененииНастройки()

	Если Настройка.Пустая() Тогда
		Возврат;
	КонецЕсли;

	Если Настройка.ВидБизнесПроцесса <> Перечисления.ВидыБизнесПроцессов.ПереоценкаТоваровРозница Тогда
		Настройка = Справочники.НастройкиБизнесПроцессов.ПустаяСсылка();
	КонецЕсли;

КонецПроцедуры // ПриИзмененииНастройки()

// Процдура устанавливает доступность элементов формы.
//
Процедура УстановитьДоступностьЭлементовФормы()

	ЭлементыФормы.Настройка.ТолькоПросмотр = Стартован;
	ЭлементыФормы.УстановкаЦенНоменклатуры.ТолькоПросмотр = Стартован;
	//ЭлементыФормы.ОсновныеДействияФормы.Кнопки.КнопкаОК.Доступность = Не Стартован;

КонецПроцедуры // УстановитьДоступностьЭлементовФормы()

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ПОЛЕЙ ФОРМЫ
//

// Процедура обработчик события "НачалоВыбора" элемента "Настройка".
//
Процедура НастройкаНачалоВыбора(Элемент, СтандартнаяОбработка)

	СтандартнаяОбработка = Ложь;
	ФормаВыбора = Справочники.НастройкиБизнесПроцессов.ПолучитьФормуВыбора(,Элемент,Элемент);
	ФормаВыбора.СправочникСписок.Отбор.ВидБизнесПроцесса.Установить(Перечисления.ВидыБизнесПроцессов.ПереоценкаТоваровРозница);
	ФормаВыбора.ПараметрТекущаяСтрока = Настройка;
	ФормаВыбора.Открыть();

КонецПроцедуры // НастройкаНачалоВыбора()

// Процедура обработчик действия элемента "КартаМаршрута" панели "ДействияФормы".
//
Процедура ДействияФормыКартаМаршрута(Кнопка)

	РаботаСБизнесПроцессами.ОткрытьКартумаршрута(Ссылка);

КонецПроцедуры //ДействияФормыКартаМаршрута()

// Процедура обработчик события "ПриИзменении" поля "настройка".
//
Процедура НастройкаПриИзменении(Элемент)

	ПриИзмененииНастройки()

КонецПроцедуры // НастройкаПриИзменении()

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ
//

// Процедура - обработчик события "ПриОткрытии" формы
//
Процедура ПриОткрытии()

	УстановитьДоступностьЭлементовФормы();

	Если ЭтоНовый() Тогда
		Инициатор = ОбщегоНазначения.ПолучитьЗначениеПеременной("глТекущийПользователь");
	КонецЕсли;

	РаботаСБизнесПроцессами.УстановитьЗаголовокБизнесПроцесса(ЭтотОбъект, ЭтаФорма);

КонецПроцедуры // ПриОткрытии()

// Процедура - обработчик события "ПослеЗаписи" формы
//  
Процедура ПослеЗаписи()

	УстановитьДоступностьЭлементовФормы();
	РаботаСБизнесПроцессами.УстановитьЗаголовокБизнесПроцесса(ЭтотОбъект, ЭтаФорма);

КонецПроцедуры // ПослеЗаписи()
