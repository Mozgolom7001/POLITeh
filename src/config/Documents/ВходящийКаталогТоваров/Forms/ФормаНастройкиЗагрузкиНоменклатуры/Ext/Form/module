
// Процедура - обаботчик события "ПередОткрытием" Формы
//
Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	ВсегоСтрок = СтрокиКаталога.Количество();
	НеопределенныхСтрок = 0;
	
	Для каждого СтрокаКаталога Из СтрокиКаталога Цикл
		
		Если Не ЗначениеЗаполнено(СтрокаКаталога.Номенклатура) Тогда
			НеопределенныхСтрок = НеопределенныхСтрок + 1;
		КонецЕсли;
		
	КонецЦикла;
	НадписьСодержание = "Товаров для обработки: " + ВсегоСтрок + ", из них новых: " + НеопределенныхСтрок;
	
	ГруппаНоменклатуры = ВосстановитьЗначение("ВходящийКаталогТоваров_ГруппаНоменклатуры");
	ОбновлятьШтрихКодыСуществующимЭлементам = Не ВосстановитьЗначение("ВходящийКаталогТоваров_ОбновлятьШтрихКодыСуществующимЭлементам") = Ложь;
	ОбновлятьСвойстваСуществующимЭлементам  = Не ВосстановитьЗначение("ВходящийКаталогТоваров_ОбновлятьСвойстваСуществующимЭлементам") = Ложь;
	ПеремещатьСуществующиеЭлементыВГруппу = ВосстановитьЗначение("ВходящийКаталогТоваров_ПеремещатьСуществующиеЭлементыВГруппу") = Истина;
	НеЗагружатьЕслиШтрихКодУстановленДляДругойНоменклатуры = Не ВосстановитьЗначение("ВходящийКаталогТоваров_НеЗагружатьЕслиШтрихКодУстановленДляДругойНоменклатуры") = Ложь;
			
КонецПроцедуры

// Процедура - обаботчик события, при нажатии на кнопку "ОК" Командной панели "ОсновныеДействияФормы"
//
Процедура ОсновныеДействияФормыОК(Кнопка)
	
	СохранитьЗначение("ВходящийКаталогТоваров_ГруппаНоменклатуры", ГруппаНоменклатуры);
	СохранитьЗначение("ВходящийКаталогТоваров_ОбновлятьШтрихКодыСуществующимЭлементам", ОбновлятьШтрихКодыСуществующимЭлементам);
	СохранитьЗначение("ВходящийКаталогТоваров_ОбновлятьСвойстваСуществующимЭлементам", ОбновлятьСвойстваСуществующимЭлементам);
	СохранитьЗначение("ВходящийКаталогТоваров_ПеремещатьСуществующиеЭлементыВГруппу", ПеремещатьСуществующиеЭлементыВГруппу);
	СохранитьЗначение("ВходящийКаталогТоваров_НеЗагружатьЕслиШтрихКодУстановленДляДругойНоменклатуры", НеЗагружатьЕслиШтрихКодУстановленДляДругойНоменклатуры);
	
	Закрыть(Истина);
	
КонецПроцедуры
