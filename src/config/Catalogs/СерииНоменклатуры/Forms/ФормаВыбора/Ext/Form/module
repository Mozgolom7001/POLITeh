Процедура ДействияФормыРедактироватьКод(Кнопка)

	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(Метаданные.Справочники.СерииНоменклатуры, ЭтаФорма, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);

КонецПроцедуры

Процедура ПриОткрытии()
	
	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные.Справочники.СерииНоменклатуры, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
	
КонецПроцедуры

// Процедура - обработчик события "ПередОткрытием" формы
//
Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
		Если РежимВыбора И НЕ ЗначениеЗаполнено(ПараметрВыборПоВладельцу) Тогда
		ФормаВыбораВладельца = Справочники.Номенклатура.ПолучитьФормуВыбора();
		ФормаВыбораВладельца.Заголовок = "Выберите элемент справочника Номенклатура, Серии которого Вы хотите выбирать.";
		//ПараметрВыборПоВладельцу = ФормаВыбораВладельца.ОткрытьМодально();
		ПараметрОтборПоВладельцу = ФормаВыбораВладельца.ОткрытьМодально();
	КонецЕсли;
	Если НЕ ЗначениеЗаполнено(ПараметрОтборПоВладельцу) Тогда
		Предупреждение("Не выбрана номенклатура!");
		Отказ = Истина;
	ИначеЕсли НЕ ПараметрОтборПоВладельцу.ВестиУчетПоСериям Тогда

			Если ТипЗнч(ВладелецФормы) = Тип("Форма") Тогда
				Если ВладелецФормы.ЭлементыФормы.Найти("ФлажокВестиУчетПоСериям") <> Неопределено Тогда
					Если ВладелецФормы.ЭлементыФормы.ФлажокВестиУчетПоСериям.Значение Тогда
						ОтветПользователя = Вопрос("Перед работой с сериями необходимо записать элемент номенклатуры. Записать?",
						РежимДиалогаВопрос.ДаНетОтмена,,, "Вопрос");
						Если ОтветПользователя = КодВозвратаДиалога.Отмена 
							ИЛИ ОтветПользователя = КодВозвратаДиалога.Таймаут Тогда
							Отказ = Истина;
							Возврат;
						КонецЕсли;

						Если ОтветПользователя = КодВозвратаДиалога.Да Тогда
							Попытка
								ВладелецФормы.СправочникОбъект.Записать();
							Исключение
							КонецПопытки;
						КонецЕсли;

					КонецЕсли;
				КонецЕсли;
			КонецЕсли;

			Если НЕ ПараметрОтборПоВладельцу.ВестиУчетПоСериям Тогда
				Предупреждение("Для номенклатуры """ + ПараметрОтборПоВладельцу + """ не ведется учет по сериям!");
				Отказ = Истина;
			КонецЕсли;

	КонецЕсли;


КонецПроцедуры



