
// Процедура - обработчик события "ПередДобавленим" табличного поля "СправочникСписок".
//
Процедура СправочникСписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, ЭтоГруппа)

	Если НЕ Копирование и Не ЭтоГруппа Тогда

		ИмяПоляОтбора = "ВидБизнесПроцесса";
		ОтборФормы = СправочникСписок.Отбор[ИмяПоляОтбора];
		Если ОтборФормы.Использование
			И (ОтборФормы.ВидСравнения = ВидСравнения.Равно Или ОтборФормы.ВидСравнения = ВидСравнения.ВСписке) Тогда

			Отказ = Истина;

			НовыйОбъект = Справочники.НастройкиБизнесПроцессов.СоздатьЭлемент();

			Если ОтборФормы.ВидСравнения = ВидСравнения.Равно Тогда

				НовыйОбъект[ИмяПоляОтбора] = ОтборФормы.Значение;
			ИначеЕсли ОтборФормы.ВидСравнения = ВидСравнения.ВСписке И ОтборФормы.Значение.Количество() > 0 Тогда

				НовыйОбъект[ИмяПоляОтбора] = ОтборФормы.Значение[0];
			КонецЕсли;

			// Надо установить родителя
			НовыйОбъект.Родитель = Родитель;

			НовыйОбъект.ПолучитьФорму(,ЭлементыФормы.СправочникСписок).Открыть();

		КонецЕсли;
	КонецЕсли;

КонецПроцедуры // СправочникСписокПередНачаломДобавления()
