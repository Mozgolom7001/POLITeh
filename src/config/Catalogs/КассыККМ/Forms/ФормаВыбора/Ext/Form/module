Процедура ДействияФормыРедактироватьКод(Кнопка)

	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(Метаданные.Справочники.КассыККМ, ЭтаФорма, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);

КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	Если РежимВыбора И НЕ ЗначениеЗаполнено(Отбор.Владелец.Значение) И НЕ ЗначениеЗаполнено(ПараметрОтборПоВладельцу) Тогда
		ФормаВыбораВладельца = Справочники.Организации.ПолучитьФормуВыбора();
		ФормаВыбораВладельца.Заголовок = "Выберите организацию, кассу ККМ которой Вы хотите выбрать.";
		Организация = ФормаВыбораВладельца.ОткрытьМодально();
		Если ТипЗнч(Организация) = ТипЗнч(Отбор.Владелец.Значение) Тогда
			Отбор.Владелец.Значение = Организация;
		КонецЕсли;
		Отбор.Владелец.Использование = ЗначениеЗаполнено(Отбор.Владелец.Значение);
	КонецЕсли;
	
	Если (Отбор.Владелец.Использование И Отбор.Владелец.ВидСравнения = ВидСравнения.Равно) ИЛИ (ЗначениеЗаполнено(ПараметрОтборПоВладельцу)) Тогда
		ЭлементыФормы.СправочникСписок.Колонки.Владелец.Видимость = Ложь;
	КонецЕсли; 
	
КонецПроцедуры

Процедура ПриОткрытии()

	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные.Справочники.КассыККМ, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);

КонецПроцедуры

